<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteo</title>
</head>
<body>
    <div id="names"></div>
    <input type="text" id="name">
    <button id="add">Agregar Nombre</button>
    <button id="sortear">Realizar Sorteo</button>
    <h1 id="ganador"></h1>

    <script>
        const nameInput = document.getElementById("name");
        const addButton = document.getElementById("add");
        const sortearButton = document.getElementById("sortear");
        const namesContainer = document.getElementById("names");
        const winnerDisplay = document.getElementById("ganador");

        const names = [];

        // Función para agregar nombres a la lista
        addButton.addEventListener("click", () => {
            const newName = nameInput.value;
            if (newName.trim() === "") return; // Evita agregar nombres vacíos

            // Añadir al array
            names.push(newName);

            // Añadir a la vista HTML
            const nameElement = document.createElement("div");
            nameElement.textContent = newName;
            namesContainer.appendChild(nameElement);

            // Limpiar el input
            nameInput.value = "";
        });

        // Función para realizar el sorteo
        sortearButton.addEventListener("click", () => {
            if (names.length === 0) {
                winnerDisplay.innerHTML = "No hay participantes";
                return;
            }

            // Deshabilitar botones durante el sorteo para evitar problemas
            sortearButton.disabled = true;
            addButton.disabled = true;

            let aleatorio;

            // Animación del sorteo
            const intervalo = setInterval(() => {
                aleatorio = names[Math.floor(Math.random() * names.length)];
                winnerDisplay.innerHTML = aleatorio;
            }, 100); // Cambia de nombre cada 100ms

            // Anunciar al ganador después de 2 segundos
            setTimeout(() => {
                clearInterval(intervalo);
                winnerDisplay.innerHTML = "El ganador es: " + aleatorio;

                // --- CORRECCIÓN ---
                // 1. Encontrar el índice (la posición) del nombre ganador en el array
                const winnerIndex = names.indexOf(aleatorio);

                // 2. Si se encontró (indexOf no devuelve -1), eliminarlo del array
                if (winnerIndex > -1) {
                    names.splice(winnerIndex, 1);
                }

                // 3. Volver a dibujar la lista de nombres en la pantalla para que refleje el cambio
                namesContainer.innerHTML = ""; // Limpiamos la lista visual
                names.forEach(name => {
                    const nameElement = document.createElement("div");
                    nameElement.textContent = name;
                    namesContainer.appendChild(nameElement);
                });
                // --- FIN DE LA CORRECCIÓN ---

                // Volver a habilitar los botones
                sortearButton.disabled = false;
                addButton.disabled = false;

            }, 2000); // El sorteo dura 2 segundos
        });
    </script>
</body>
</html>